{% extends 'flatpages/main/html/main.html' %}
{% load static %}
{% load i18n %}
{% block Message_content %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/messages.js' %}" defer></script>
<meta name="csrf-token" content="{{csrf_token}}"></meta>

<div class="chat-container">
   <!-- Список чатов слева -->
   <div class="chat-list">
       {% for chat in chat_data %}
           <div class="chat" id="chat-{{ chat.id }}">
               <div class="chat-header">
                   <h2>{{ chat.name }}</h2>
               </div>
               <div class="chat-messages" style="display: none;"> <!-- Скрываем сообщения по умолчанию -->
                   {% for message in chat.messages %}
                       <div class="messages">
                           <strong>{{ message.author }}:</strong> 
                           <div class="message">{{ message.content }}</div>
                           <small>{{ message.pub_date }}</small>
                       </div>
                   {% endfor %}
               </div>
           </div>
       {% endfor %}
   </div>
</div>

<!-- Контейнер для активных чатов справа -->
<div class="active-chats">
   <div id="chat-windows">
       <!-- Здесь будут отображаться выбранные чаты -->
   </div>
</div>
<!-- Контейнер для активных чатов справа -->
<div class="active-chats">
   <div id="chat-windows">
       <!-- Здесь будут отображаться выбранные чаты -->
   </div>
</div>
<style>
.messages{
  overflow-y:auto;
  
}
.chat-container {
   display: flex;
   height: 80vh;
}
.chat-list {
   width: 300px;
   border-right: 1px solid #ccc;
   overflow-y: auto;
}
.active-chats {
   flex-grow: 1;
   display: flex;
   flex-wrap: wrap;
   padding: 10px;
   gap: 10px;
   
   
}
.chat-item {
   padding: 10px;
   cursor: pointer;
   border-bottom: 1px solid #eee;
}
.chat-item:hover {
   background-color: #f5f5f5;
}
.chat-item.active {
   background-color: #e3e3e3;
}
.chat-window {
   width: 30vh;
   height: 30vh;
   border: 1px solid #ccc;
   border-radius: 5px;
   margin: 5px;
   display: inline-block;
   flex-direction: column;
}
.chat-header {
   padding: 10px;
   background-color: #f5f5f5;
   border-bottom: 1px solid #ccc;
   display: flex;
   justify-content: space-between;
}
.chat-messages {
   flex-grow: 1;
   overflow-y: auto;
   padding: 10px;
}
.chat-input {
   padding: 10px;
   border-top: 1px solid #ccc;
}
.dialog-chat, .group-chat {
   display: flex;
   align-items: center;
   gap: 10px;
}
.chat-avatar {
   width: 40px;
   height: 40px;
   border-radius: 50%;
}
</style>

{% endblock %}
